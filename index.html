<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Investiga√ß√£o Criminal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#020617">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:radial-gradient(circle at top,#020617,#000);color:#e5e7eb}
.intro{position:fixed;inset:0;background:url("https://i.ibb.co/RTwVMtJr/file-000000001c64720e8a39d9ce59a7b6a4.png") center/cover no-repeat;display:flex;align-items:center;justify-content:center;z-index:9;animation:fadeOut 1s ease forwards;animation-delay:2.5s}
.intro::after{content:"";position:absolute;inset:0;background:rgba(0,0,0,.7)}
.intro h1{position:relative;z-index:1;font-size:2rem;text-shadow:0 0 20px #38bdf8}
@keyframes fadeOut{to{opacity:0;visibility:hidden}}
.app{max-width:420px;margin:auto;min-height:100vh;background:#020617;border-radius:18px;overflow:hidden}
.cover{height:180px;background:url("https://i.ibb.co/RTwVMtJr/file-000000001c64720e8a39d9ce59a7b6a4.png") center/cover no-repeat}
.content{padding:20px;text-align:center}
.btn{width:100%;margin-top:10px;padding:14px;border-radius:14px;border:none;cursor:pointer;font-weight:bold}
.btn-primary{background:#38bdf8;color:#020617}
.btn-option{background:#111827;color:#e5e7eb;border:1px solid #38bdf8}
.btn-option:hover{background:#38bdf8;color:#020617}
.game-box{padding:20px;border-top:2px solid #38bdf8;animation:fadeIn .4s ease;text-align:center}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
#btnInstall{display:none;margin-top:15px}

/* DOSSI√ä */
.dossie{position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:20;display:none;overflow:auto}
.dossie-box{max-width:400px;margin:40px auto;background:#020617;border-radius:16px;padding:20px}
.dossie h3{color:#38bdf8}
</style>
</head>

<body>

<div class="intro"><h1>Investiga√ß√£o Criminal</h1></div>

<div class="app">
<div class="cover"></div>
<div class="content">
<h2>Caso 01 ‚Äî O Desaparecimento de Elisa</h2>
<p>Cada escolha pode revelar‚Ä¶ ou esconder a verdade.</p>
<button class="btn btn-primary" onclick="startGame()">Iniciar Investiga√ß√£o</button>
<button class="btn btn-option" onclick="abrirDossie()">üìÇ Abrir Dossi√™</button>
<button id="btnInstall" class="btn btn-option">üì• Instalar Aplicativo</button>
</div>
</div>

<!-- DOSSI√ä -->
<div class="dossie" id="dossie">
  <div class="dossie-box" id="dossieBox"></div>
</div>

<script>
const historia=[
"Elisa desapareceu numa noite fria e silenciosa.",
"Ela parecia nervosa nos √∫ltimos dias.",
"O celular encontrado escondia conversas comprometedoras.",
"Cinco pessoas pr√≥ximas tinham motivos para mentir.",
"Voc√™ deve entender a hist√≥ria entre cada um deles e a v√≠tima."
];

let step=0;
let correctAnswers=0;

const game=[
{q:"Por onde voc√™ come√ßa a investiga√ß√£o?",options:[
{t:"Analisar o quarto",c:true,r:"O quarto mostra sinais de luta."},
{t:"Ignorar o quarto",c:false,r:"Uma pista importante foi perdida."}
]},
{q:"O celular revela:",options:[
{t:"Mensagens amea√ßadoras",c:true,r:"Conflitos com pessoas pr√≥ximas."},
{t:"Nada importante",c:false,r:"Provas ignoradas."}
]},
{q:"Interrogat√≥rio ‚Äî Melhor amiga",options:[
{t:"Confrontar contradi√ß√µes",c:true,r:"Discuss√µes por inveja e trai√ß√£o."},
{t:"Acreditar na vers√£o",c:false,r:"Ela esconde algo grave."}
]},
{q:"Interrogat√≥rio ‚Äî Ex-namorado",options:[
{t:"Questionar o √°libi",c:true,r:"Hist√≥rico de controle e amea√ßas."},
{t:"Encerrar r√°pido",c:false,r:"Voc√™ ignora o passado violento."}
]},
{q:"Interrogat√≥rio ‚Äî Colega de trabalho",options:[
{t:"Perguntar sobre amea√ßas",c:true,r:"Esquema ilegal descoberto por Elisa."},
{t:"Ignorar hist√≥rico",c:false,r:"Motivo financeiro ignorado."}
]},
{q:"Interrogat√≥rio ‚Äî Vizinho",options:[
{t:"Mostrar c√¢meras",c:true,r:"Briga ouvida na noite do sumi√ßo."},
{t:"Aceitar vers√£o",c:false,r:"Mentira passa despercebida."}
]},
{q:"Interrogat√≥rio ‚Äî Irm√£o",options:[
{t:"Confrontar liga√ß√µes",c:true,r:"Conflito por heran√ßa."},
{t:"N√£o pressionar",c:false,r:"Segredos familiares ocultos."}
]},
{q:"Conclus√£o final",options:[
{t:"Acusar a melhor amiga",c:true,r:"üî¥ CULPADA: Planejou tudo."},
{t:"Acusar outro",c:false,r:"‚ùå O culpado escapa."}
]}
];

/* DOSSI√ä */
const dossieData=[
{
nome:"Melhor Amiga",
texto:"Cresceu com Elisa. Nos √∫ltimos meses demonstrava inveja da vida pessoal e profissional da v√≠tima. Temia ser denunciada."
},
{
nome:"Ex-namorado",
texto:"Relacionamento abusivo. N√£o aceitava o t√©rmino. Elisa tinha medo dele."
},
{
nome:"Colega de Trabalho",
texto:"Elisa descobriu um esquema ilegal que poderia lev√°-lo √† pris√£o."
},
{
nome:"Vizinho",
texto:"Observava a rotina de Elisa. Ouvia discuss√µes frequentes."
},
{
nome:"Irm√£o",
texto:"Disputa por heran√ßa. Rela√ß√£o estremecida nos √∫ltimos meses."
}
];

let dIndex=0;

function abrirDossie(){
dIndex=0;
document.getElementById("dossie").style.display="block";
renderDossie();
}
function fecharDossie(){
document.getElementById("dossie").style.display="none";
}
function renderDossie(){
const d=dossieData[dIndex];
document.getElementById("dossieBox").innerHTML=`
<h3>${d.nome}</h3>
<p>${d.texto}</p>
<button class="btn btn-option" onclick="dIndex>0&&dIndex--;renderDossie()">‚¨Ö Anterior</button>
<button class="btn btn-option" onclick="dIndex<dossieData.length-1&&dIndex++;renderDossie()">Pr√≥ximo ‚û°</button>
<button class="btn btn-primary" onclick="fecharDossie()">Fechar</button>
`;
}

function startGame(){step=0;correctAnswers=0;mostrarHistoria(0)}
function mostrarHistoria(i){
const app=document.querySelector(".app");
const box=document.createElement("div");
box.className="game-box";
box.innerHTML=`<p>${historia[i]}</p><button class="btn btn-primary">${i<historia.length-1?"Continuar":"Come√ßar investiga√ß√£o"}</button>`;
app.appendChild(box);
box.querySelector("button").onclick=()=>{box.remove();i<historia.length-1?mostrarHistoria(i+1):showStep()}
}
function showStep(){
const app=document.querySelector(".app");
const box=document.createElement("div");
box.className="game-box";
const current=game[step];
let html=`<h3>${current.q}</h3>`;
current.options.forEach((o,i)=>html+=`<button class="btn btn-option" onclick="answer(${i})">${o.t}</button>`);
box.innerHTML=html;
app.appendChild(box);
}
function answer(i){
const current=game[step];
alert(current.options[i].r);
if(current.options[i].c)correctAnswers++;
document.querySelector(".game-box").remove();
step++;
step<game.length?showStep():endGame();
}
function endGame(){
const app=document.querySelector(".app");
const box=document.createElement("div");
box.className="game-box";
box.innerHTML=`<h3>Resultado Final</h3>
<p>${correctAnswers>=7?"üïµÔ∏è Caso resolvido.":"‚ùå Investiga√ß√£o falhou."}</p>
<button class="btn btn-primary" onclick="location.reload()">Jogar novamente</button>`;
app.appendChild(box);
}

/* PWA */
let deferredPrompt;
const installBtn=document.getElementById("btnInstall");
window.addEventListener("beforeinstallprompt",e=>{
e.preventDefault();
deferredPrompt=e;
installBtn.style.display="block";
});
installBtn.addEventListener("click",()=>{deferredPrompt.prompt();deferredPrompt=null});
</script>

</body>
</html>
