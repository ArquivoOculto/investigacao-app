<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Investiga√ß√£o Criminal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#020617">

  <style>
    * {
      box-sizing: border-box;
      font-family: Arial, Helvetica, sans-serif;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at top, #020617, #000);
      color: #e5e7eb;
    }

    .intro {
      position: fixed;
      inset: 0;
      background: url("https://i.ibb.co/RTwVMtJr/file-000000001c64720e8a39d9ce59a7b6a4.png") center/cover no-repeat;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9;
      animation: fadeOut 1s ease forwards;
      animation-delay: 2.5s;
    }

    .intro::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,.7);
    }

    .intro h1 {
      position: relative;
      z-index: 1;
      font-size: 2rem;
      text-shadow: 0 0 20px #38bdf8;
    }

    @keyframes fadeOut {
      to { opacity: 0; visibility: hidden; }
    }

    .app {
      max-width: 420px;
      margin: auto;
      min-height: 100vh;
      background: #020617;
      border-radius: 18px;
      overflow: hidden;
    }

    .cover {
      height: 180px;
      background: url("https://i.ibb.co/RTwVMtJr/file-000000001c64720e8a39d9ce59a7b6a4.png") center/cover no-repeat;
    }

    .content {
      padding: 20px;
      text-align: center;
    }

    .btn {
      width: 100%;
      margin-top: 10px;
      padding: 14px;
      border-radius: 14px;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }

    .btn-primary {
      background: #38bdf8;
      color: #020617;
    }

    .btn-option {
      background: #111827;
      color: #e5e7eb;
      border: 1px solid #38bdf8;
    }

    .btn-option:hover {
      background: #38bdf8;
      color: #020617;
    }

    .game-box {
      padding: 20px;
      border-top: 2px solid #38bdf8;
      animation: fadeIn .4s ease;
      text-align: center;
    }

    .game-box p {
      font-size: 15px;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    #btnInstall {
      display: none;
      margin-top: 15px;
    }
  </style>
</head>

<body>

<!-- INTRO -->
<div class="intro">
  <h1>Investiga√ß√£o Criminal</h1>
</div>

<div class="app">
  <div class="cover"></div>

  <div class="content">
    <h2>Caso 01 ‚Äî O Desaparecimento de Elisa</h2>
    <p>Cada escolha pode revelar‚Ä¶ ou esconder a verdade.</p>

    <button class="btn btn-primary" onclick="startGame()">
      Iniciar Investiga√ß√£o
    </button>

    <button id="btnInstall" class="btn btn-option">
      üì• Instalar HydraFilmes
    </button>
  </div>
</div>

<script>
/* ===== HIST√ìRIA ===== */

const historia = [
  "Elisa desapareceu numa noite fria e silenciosa.",
  "Seu celular foi encontrado desligado em seu quarto.",
  "Mensagens recentes indicam que ela estava com medo.",
  "Voc√™ √© o investigador respons√°vel por descobrir a verdade."
];

/* ===== JOGO ===== */

let step = 0;
let correctAnswers = 0;

const game = [
  {
    q: "Elisa desapareceu. Onde voc√™ investiga primeiro?",
    options: [
      { t: "Quarto da v√≠tima", c: true, r: "Voc√™ encontra marcas de luta e um celular escondido." },
      { t: "Cozinha", c: false, r: "Nada relevante al√©m de um copo lavado." }
    ]
  },
  {
    q: "O celular revela:",
    options: [
      { t: "Mensagens amea√ßadoras", c: true, r: "As mensagens indicam algu√©m pr√≥ximo." },
      { t: "Fotos antigas", c: false, r: "As fotos n√£o ajudam na investiga√ß√£o." }
    ]
  },
  {
    q: "Quem voc√™ interroga primeiro?",
    options: [
      { t: "Melhor amiga", c: true, r: "Ela se contradiz v√°rias vezes." },
      { t: "Vizinho", c: false, r: "O vizinho n√£o estava na cidade." }
    ]
  },
  {
    q: "Nova pista surge:",
    options: [
      { t: "C√¢meras de seguran√ßa", c: true, r: "As imagens mostram algu√©m conhecido entrando." },
      { t: "Relato an√¥nimo", c: false, r: "O relato √© falso." }
    ]
  },
  {
    q: "Conclus√£o final:",
    options: [
      { t: "Acusar a melhor amiga", c: true, r: "üî¥ CULPADA REVELADA: Ela tentou silenciar Elisa." },
      { t: "Acusar o vizinho", c: false, r: "‚ùå O verdadeiro culpado continua livre." }
    ]
  }
];

/* ===== FUN√á√ïES ===== */

function startGame() {
  step = 0;
  correctAnswers = 0;
  mostrarHistoria(0);
}

function mostrarHistoria(index) {
  const app = document.querySelector(".app");

  const box = document.createElement("div");
  box.className = "game-box";

  box.innerHTML = `
    <p>${historia[index]}</p>
    <button class="btn btn-primary">
      ${index < historia.length - 1 ? "Continuar" : "Come√ßar investiga√ß√£o"}
    </button>
  `;

  app.appendChild(box);

  box.querySelector("button").onclick = () => {
    box.remove();
    if (index < historia.length - 1) {
      mostrarHistoria(index + 1);
    } else {
      showStep();
    }
  };
}

function showStep() {
  const app = document.querySelector(".app");
  const box = document.createElement("div");
  box.className = "game-box";

  const current = game[step];
  let html = `<h3>${current.q}</h3>`;

  current.options.forEach((opt, i) => {
    html += `<button class="btn btn-option" onclick="answer(${i})">${opt.t}</button>`;
  });

  box.innerHTML = html;
  app.appendChild(box);
}

function answer(index) {
  const current = game[step];
  alert(current.options[index].r);

  if (current.options[index].c) correctAnswers++;

  document.querySelector(".game-box").remove();
  step++;

  if (step < game.length) {
    showStep();
  } else {
    endGame();
  }
}

function endGame() {
  const app = document.querySelector(".app");
  const box = document.createElement("div");
  box.className = "game-box";

  box.innerHTML = `
    <h3>Resultado Final</h3>
    <p>${correctAnswers >= 4
      ? "üïµÔ∏è Voc√™ resolveu o caso corretamente e revelou o culpado."
      : "‚ùå Voc√™ seguiu pistas erradas. O culpado escapou."}
    </p>
    <button class="btn btn-primary" onclick="location.reload()">
      Jogar novamente
    </button>
  `;

  app.appendChild(box);
}

/* ===== BOT√ÉO INSTALAR PWA ===== */

let deferredPrompt;
const installBtn = document.getElementById("btnInstall");

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "block";
});

installBtn.addEventListener("click", async () => {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  await deferredPrompt.userChoice;
  deferredPrompt = null;
  installBtn.style.display = "none";
});
</script>

</body>
</html>
